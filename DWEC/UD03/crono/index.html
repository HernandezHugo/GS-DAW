<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pruebas js UD03</title>
  </head>
  <body>
    <div id="display"></div>
    <button id="start">Start</button>
    <button id="stop" disabled>Stop</button>
    <button id="reset" disabled>reset</button>
    <button id="lapse" disabled>lapse</button>
    <div id="display_lapse">
      <!-- cuenta tras
        ej: 1 min hasta 0
        milesimas -> que tan cerca de 50
        crear cookies
        mostrar cookies
        eliminar cookies
        record con cookie "sobreescribir"
        alert congratz
        boton +grande al fallo

             -->
    </div>
    <script>
      //Hay que formatear para que se vea bien
      let myDate = new Date();
      let cronos;
      let display = document.getElementById("display");
      let display_lapse = document.getElementById("display_lapse");
      let start = document.getElementById("start");
      let stop = document.getElementById("stop");
      let reset = document.getElementById("reset");
      let lapse = document.getElementById("lapse");

      //initialize display
      initialize();
      function initialize() {
        myDate.setHours(0, 0, 0, 0);
        display.innerHTML = "00:00:00";
      }

      function crono() {
        let hour = myDate.getHours();
        let min = myDate.getMinutes();
        let sec = myDate.getSeconds();

        sec += 1;

        if (sec == 60) {
          sec = 0;
          myDate.setMinutes((min += 1));
        }

        if (hour < 10) hour = "0" + hour;
        if (min < 10) min = "0" + min;
        if (sec < 10) sec = "0" + sec;

        myDate.setSeconds(sec);

        display.innerHTML = hour + ":" + min + ":" + sec;
      }

      //interval just initiate the page
      /* window.onload = function () {
        crono = setInterval(crono, 1000);
      }; */

      start.addEventListener("click", (e) => {
        cronos = setInterval(crono, 1000);
        start.disabled = true;
        lapse.disabled = false;
        stop.disabled = false;
        reset.disabled = true;
      });

      stop.addEventListener("click", (e) => {
        clearInterval(cronos);
        start.disabled = false;
        lapse.disabled = true;
        stop.disabled = true;
        reset.disabled = false;
        start.innerHTML = "Continue";
      });

      reset.addEventListener("click", (e) => {
        initialize();
        start.innerHTML = "Start";
      });
      
      lapse.addEventListener("click", (e) => {
        let hour = myDate.getHours();
        let min = myDate.getMinutes();
        let sec = myDate.getSeconds();
        
        if (hour < 10) hour = "0" + hour;
        if (min < 10) min = "0" + min;
        if (sec < 10) sec = "0" + sec;
        
        display_lapse.innerHTML += '<p>'+hour + ":" + min + ":" + sec + '</p>';
        start.innerHTML = "Start";
      });

      //extrae valores
      //getHours/Minutes/Seconds
      //getDay/Month/Year

      //setTimeout()
      //setInterval()
    </script>

    <script src="./script.js"></script>
  </body>
</html>
